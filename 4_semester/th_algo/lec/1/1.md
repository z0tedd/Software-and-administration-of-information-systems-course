# Примитивно-рекурсивные функции

## Практическое занятие 1

## Теория рекурсивных функций

В теории рекурсивных функций, как и вообще в теории алгоритмов, принят конструктивный (финитный) подход, основной чертой которого является то, что все множество исследуемых объектов (в данном случае функций) строится из конечного числа исходных объектов — базиса — с помощью простых операций, эффективная вычислимость которых достаточно очевидна. Операции над функциями называют операторами.

Для простоты будем рассматривать только числовые функции, т.е. функции, аргументы и значения которых принадлежат множеству натуральных чисел $N$ (в теории рекурсивных функций полагают $N = 0, 1, 2, \ldots$). Иначе говоря, числовой $n$-местной функцией $f(x_1, x_2, \ldots, x_n)$ называется функция, определенная на некотором подмножестве $N \subseteq N^n$ с натуральными значениями. Если область определения $f: N^n \to N$ совпадает с множеством $N^n$, то говорят, что функция $f$ всюду определена, в противном случае — частично определена.

**Частичными** числовыми функциями $f(x_1, x_2, \ldots, x_n)$, где $x_i \in N$ ($1 \leq i \leq n$), называют функции, определенные не на всех наборах $(x_1, x_2, \ldots, x_n) \in N^n$.

## Простейшие числовые функции и операторы

- **Нуль-функция**: $0(x) = 0$;
- **Функция следования**: $S(x) = x + 1$;
- **Функция проекции**: $I_m^n(x_1, x_2, \ldots, x_n) = x_m$ ($m \leq n$).

### Операторы

- **Оператор суперпозиции**
- **Оператор примитивной рекурсии**
- **Оператор минимизации**

## Оператор суперпозиции

Оператором суперпозиции $F_m^n$ называется подстановка в функцию от $m$ переменных $m$ функций, каждая из которых зависит от $n$ одних и тех же переменных. Суперпозиция дает новую функцию уже от $n$ переменных. Например, для функций $h(x_1, x_2, \ldots, x_m)$, $g_1(x_1, x_2, \ldots, x_n)$, $g_2(x_1, x_2, \ldots, x_n)$, $\ldots$, $g_m(x_1, x_2, \ldots, x_n)$ их суперпозиция дает новую функцию $f(x_1, x_2, \ldots, x_n)$:

$$
F_m^n(h, g_1, g_2, \ldots, g_m) = h(g_1(x_1, x_2, \ldots, x_n), g_2(x_1, x_2, \ldots, x_n), \ldots, g_m(x_1, x_2, \ldots, x_n)) = f(x_1, x_2, \ldots, x_n).
$$

В этом случае говорят, что $n$-местная функция $f(x_1, x_2, \ldots, x_n)$ получена с помощью оператора суперпозиции из $m$-местной функции $h(x_1, x_2, \ldots, x_m)$ и $n$-местных функций $g_1(x_1, x_2, \ldots, x_n)$, $g_2(x_1, x_2, \ldots, x_n)$, \ldots, $g_m(x_1, x_2, \ldots, x_n)$, если

$$
f(x_1, x_2, \ldots, x_n) = h(g_1(x_1, x_2, \ldots, x_n), g_2(x_1, x_2, \ldots, x_n), \ldots, g_m(x_1, x_2, \ldots, x_n)).
$$

## Оператор примитивной рекурсии

Оператор примитивной рекурсии определяет $(n+1)$-местную функцию $f$ через $n$-местную функцию $g$ и $(n+2)$-местную функцию $h$ следующим образом:

$$
\begin{cases}
f(x_1, x_2, \ldots, x_n, 0) = g(x_1, x_2, \ldots, x_n); \\
f(x_1, x_2, \ldots, x_n, y+1) = h(x_1, x_2, \ldots, x_n, y, f(x_1, x_2, \ldots, x_n, y)).
\end{cases}
$$

Пара равенств называется схемой примитивной рекурсии.

Тот факт, что функция $f$ определена схемой, выражается равенством

$$
f(x_1, x_2, \ldots, x_n, y) = R_n(g, h).
$$

Эта схема определяет $f$ рекурсивно не только через другие функции, но и через значения $f$ в предшествующих точках: значение $f$ в точке $y+1$ зависит от значения $f$ в точке $y$.

Для вычисления $f(x_1, x_2, \ldots, x_n, k)$ понадобится $k+1$ вычислений по указанной схеме для $y = 0, 1, \ldots, k$.

Существенным в операторе примитивной рекурсии является то, что независимо от числа переменных в $f$, рекурсия ведется только по одной переменной $y$, а остальные $n$ переменных $x_1, x_2, \ldots, x_n$ на момент применения схемы зафиксированы и играют роль параметров.

В случае, когда $n = 0$, т.е. определяемая функция $f$ является одноместной, схема принимает более простой вид:

$$
\begin{cases}
f(0) = C; \\
f(y+1) = h(y, f(y))
\end{cases}
$$

где $C$ — константа.

Функция называется **примитивно-рекурсивной**, если она может быть получена из нуль-функции $O(x)$, функции следования $S(x)$ и функции проекции $I_m^n$ с помощью конечного числа применений операторов суперпозиции и примитивной рекурсии.

Этому определению можно придать более формальный индуктивный вид:

1. Функции $O(x)$, $S(x)$ и $I_m^n$ для всех натуральных $n, m$, где $m \leq n$, являются примитивно-рекурсивными.
2. Если $g_1(x_1, x_2, \ldots, x_n)$, $\ldots, $g_m(x_1, x_2, \ldots, x_n)$, $h(x_1, x_2, \ldots, x_n)$ — примитивно-рекурсивные функции, то $F_m^n(h, g_1, g_2, \ldots, g_m)$ — примитивно-рекурсивные функции для любых натуральных $n, m$.
3. Если $g(x_1, x_2, \ldots, x_n)$ и $h(x_1, x_2, \ldots, x_n, y, z)$ — примитивно-рекурсивные функции, то $R_n(g, h)$ — примитивно-рекурсивная функция.
4. Других примитивно-рекурсивных функций нет.

## Оператор минимизации

Пусть задана некоторая функция $f(x, y)$. Зафиксируем значение $x$ и выясним, при каком $y$ функция $f(x, y) = 0$.

Более сложной задачей является отыскание для данной функции $f(x, y)$ и фиксированного $x$ наименьшего из тех значений $y$, при которых функция $f(x, y) = 0$. Так как результат решения задачи зависит от $x$, то наименьшее значение $y$, при котором функция $f(x, y) = 0$, есть функция $x$. Принято обозначение

$$
\varphi(x) = \mu_y [f(x, y) = 0],
$$

которое читается как: «наименьшее $y$ такое, что $f(x, y) = 0$».

Аналогично определяется функция многих переменных:

$$
\varphi(x_1, x_2, \ldots, x_n) = \mu_y [f(x_1, x_2, \ldots, x_n, y) = 0].
$$

Переход от функции $f(x_1, x_2, \ldots, x_n, y)$ к функции $\varphi(x_1, x_2, \ldots, x_n)$ принято называть применением **$\mu$-оператора**.

### Алгоритм вычисления функции $\varphi$

1. Вычислим $f(x_1, x_2, \ldots, x_n, 0)$. Если это значение $f(x_1, x_2, \ldots, x_n, 0)$ равно нулю, то полагаем $\varphi(x_1, x_2, \ldots, x_n) = 0$. Если $f(x_1, x_2, \ldots, x_n, 0) \neq 0$, то переходим к следующему шагу.
2. Вычислим $f(x_1, x_2, \ldots, x_n, 1)$. Если $f(x_1, x_2, \ldots, x_n, 1) = 0$, то полагаем $\varphi(x_1, x_2, \ldots, x_n) = 1$. Если же $f(x_1, x_2, \ldots, x_n, 1) \neq 0$, то переходим к следующему шагу. И так далее.

Если окажется, что для всех $y$ функция $f(x_1, x_2, \ldots, x_n, y) \neq 0$, то функцию $\varphi(x_1, x_2, \ldots, x_n)$ в этом случае считают неопределенной. Но возможно, что существует такое $y_0$, что $f(x_1, x_2, \ldots, x_n, y_0) = 0$ и, значит, есть и наименьшее $y$, при котором $f(x_1, x_2, \ldots, x_n, y) = 0$, и в то же время может случиться, что при некотором $z$ ($0 < z < y_0$) значение функции $f(x_1, x_2, \ldots, x_n, z)$ не определено. Очевидно, что в этом случае процесс вычисления наименьшего $y$, при котором $f(x_1, x_2, \ldots, x_n, y) = 0$, не дойдет до $y_0$. И здесь функцию $\varphi(x_1, x_2, \ldots, x_n)$ считают неопределенной.

## Методология составления схем примитивной рекурсии

Для составления схемы примитивной рекурсии первоначально необходимо определить вид нужной схемы. Для этого следует ответить на вопрос: «От скольких переменных зависит данная функция?» Допустим, переменных $n \geq 2$. Значит, используется схема рекурсии с параметрами.

Следующие шаги:

1. Если не указано, по какой переменной составлять схему, то следует выбрать наиболее простую переменную (наименьшее количество операций с этой переменной или наиболее простые операции). Если при ответе на вопрос: «От скольких переменных зависит данная функция?» получено, что такая переменная одна единственная, значит, используется схема рекурсии без параметров.
2. Определить, чему равно значение функции в точке ноль? (верхний индекс в функциях и операциях для $n > 1$ будет равен $n - 1$).
3. Определить, чему равно значение функции в следующей точке (переменная, по которой берется рекурсия, плюс единица). Постарайтесь преобразовать получившееся значение к самой функции, верхний индекс в функциях и операциях для любого значения $n$ будет равен $n + 1$.
4. Записать функцию через операцию примитивной рекурсии.

## Примеры

# Доказать примитивную рекурсивность суммы $f(x,y)=x+y$

**Решение.**  
$$f_+(x,0) = x = I_1^1(x);$$  
$$f_+(x,y+1) = f_+(x,y) + 1 = S(f_+(x,y)).$$

Таким образом,  
$$f_+(x,y) = h(x,y-1,f(x,y-1)) = R_1(I_1^1(x),h(x,y,z)),$$  
где $h(x,y,z) = z + 1$.

Действительно, имеем:  
$$f_+(x,0) = x;$$  
$$f_+(x,1) = h(x,0,f_+(x,0)) = x + 1;$$  
$$f_+(x,2) = h(x,1,f_+(x,1)) = x + 1 + 1 = x + 2;$$  
$$f_+(x,3) = h(x,2,f_+(x,2)) = x + 2 + 1 = x + 3;$$  
$$\vdots$$  
$$f_+(x,y-1) = h(x,y-2,f_+(x,y-2)) = x + (y-2) + 1 = x + y - 1;$$  
$$f_+(x,y) = h(x,y-1,f_+(x,y-1)) = x + (y-1) + 1 = x + y.$$

---

# Доказать примитивную рекурсивность произведения $f(x,y) = xy$

**Решение.**  
$$f_\times(x,0) = 0;$$  
$$f_\times(x,y+1) = x \cdot (y+1) = x \cdot y + x = f_x(x,y) + x = f_+(x,f_x(x,y));$$

Или $f_x(x,y+1) = h(x,y,f_x(x,y)) = x+z$, где $z = f_x(x,y)$.

Выполняя действия по полученной схеме, получаем:  
$$f_x(x,0) = 0;$$  
$$f_x(x,1) = x+0 = x;$$  
$$f_x(x,2) = x+x=2x;$$  
$$f_x(x,3) = x+2x=3x;$$  
$$\vdots$$  
$$f_x(x,y-1) = x+(y-2)x=x \cdot y-x;$$  
$$f_x(x,y) = x+x \cdot y-x = x \cdot y.$$

---

# Доказать примитивную рекурсивность возведения в степень $f\_{exp}(x, y) = x^y$

**Решение.**

$$f_{exp}(x, 0) = x^0 = 1;$$

$$f_{exp}(x, y + 1) = x^{y+1} = x^y \cdot x = x \cdot f_{exp}(x, y) = f_\times(x, f_{exp}(x, y)).$$

$$f_{exp}(x, y + 1) = h(x, y, f_{exp}(x, y)) = x \cdot z, \quad \text{где } z = f_{exp}(x, y).$$

Действительно, выполняя вычисления по полученной схеме, получаем:

$$f_{exp}(x, 0) = x^0 = 1;$$

$$f_{exp}(x, 1) = x \cdot 1 = x;$$

$$f_{exp}(x, 2) = x \cdot x = x^2;$$

$$f_{exp}(x, 3) = x \cdot x^2 = x^3;$$

$$\vdots \quad \vdots \quad \vdots$$

$$f_{exp}(x, y - 1) = x \cdot x^{y-2} = x^{y-1};$$

$$f_{exp}(x, y) = x \cdot x^{y-1} = x^y.$$

---

# Задания

1. Доказать примитивную рекурсивность факториала $f(x) = x!$.
2. Доказать примитивную рекурсивность псевдоразности
   $$
   f(x,y) = x - y =
   \begin{cases}
   x - y, & \text{если } x \geq y; \\
   0, & \text{иначе}.
   \end{cases}
   $$
3. Доказать примитивную рекурсивность знаковой функции
   $$
   f(x) = sg(x) =
   \begin{cases}
   0, & \text{если } x = 0; \\
   1, & \text{если } x > 0.
   \end{cases}
   $$
4. Доказать примитивную рекурсивность равенства

   $$
   f(x, y) = eql(x, y) =
   \begin{cases}
   1, & \text{если } x = y; \\
   0, & \text{иначе}.
   \end{cases}
   $$

5. Доказать примитивную рекурсивность модуля разности:

$$
f(x, y) = mod(x, y) =
\begin{cases}
x \div y, & \text{если } x \geq y; \\
y \div x, & \text{иначе}.
\end{cases}
$$

6. Доказать примитивную рекурсивность функции «больше»:

$$
f(x, y) = more(x, y) =
\begin{cases}
1, & \text{если } x > y; \\
0, & \text{иначе}.
\end{cases}
$$

7. Доказать примитивную рекурсивность функции «больше или равно»:

$$
f(x, y) = moreql(x, y) =
\begin{cases}
1, & \text{если } x \geq y; \\
0, & \text{иначе}.
\end{cases}
$$
